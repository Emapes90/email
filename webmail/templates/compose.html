{% extends "base.html" %} {% block title %}Compose â€” {{ app_name }}{% endblock
%} {% block body %}
<div class="app-layout">
  {% include "_sidebar.html" %}

  <div class="main-content">
    <div class="top-bar">
      <a href="{{ url_for('mail.inbox') }}" class="btn btn-ghost btn-icon">
        <i class="fas fa-arrow-left"></i>
      </a>
      <span class="top-bar-title">New Message</span>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div style="padding: 1rem 1.5rem 0">
      {% for category, message in messages %}
      <div class="alert alert-{{ category }}" data-auto-dismiss>
        <i
          class="fas {% if category == 'error' %}fa-exclamation-circle{% else %}fa-check-circle{% endif %}"
        ></i>
        <span>{{ message }}</span>
      </div>
      {% endfor %}
    </div>
    {% endif %} {% endwith %}

    <div class="compose-view">
      <form
        method="POST"
        action="{{ url_for('mail.compose') }}"
        enctype="multipart/form-data"
      >
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <div class="compose-card">
          <div class="compose-fields">
            <div class="compose-field">
              <label>To</label>
              <input
                type="text"
                name="to"
                placeholder="recipient@example.com"
                required
                value="{{ reply_to or '' }}"
              />
            </div>
            <div class="compose-field">
              <label>Cc</label>
              <input type="text" name="cc" placeholder="cc@example.com" />
            </div>
            <div class="compose-field">
              <label>Bcc</label>
              <input type="text" name="bcc" placeholder="bcc@example.com" />
            </div>
            <div class="compose-field">
              <label>Subject</label>
              <input
                type="text"
                name="subject"
                placeholder="Email subject"
                value="{{ reply_subject or '' }}"
              />
            </div>
          </div>

          <div class="compose-toolbar">
            <button type="button" class="toolbar-btn" data-tooltip="Bold">
              <i class="fas fa-bold"></i>
            </button>
            <button type="button" class="toolbar-btn" data-tooltip="Italic">
              <i class="fas fa-italic"></i>
            </button>
            <button type="button" class="toolbar-btn" data-tooltip="Underline">
              <i class="fas fa-underline"></i>
            </button>
            <div
              style="
                width: 1px;
                height: 20px;
                background: var(--border-primary);
                margin: 0 0.25rem;
              "
            ></div>
            <button
              type="button"
              class="toolbar-btn"
              data-tooltip="Bullet List"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="toolbar-btn"
              data-tooltip="Number List"
            >
              <i class="fas fa-list-ol"></i>
            </button>
            <div
              style="
                width: 1px;
                height: 20px;
                background: var(--border-primary);
                margin: 0 0.25rem;
              "
            ></div>
            <button type="button" class="toolbar-btn" data-tooltip="Link">
              <i class="fas fa-link"></i>
            </button>
            <button type="button" class="toolbar-btn" data-tooltip="Image">
              <i class="fas fa-image"></i>
            </button>
          </div>

          <div class="compose-body">
            <textarea
              name="body"
              placeholder="Write your message..."
              id="composeBody"
            >
{{ reply_body or '' }}</textarea
            >
          </div>

          <div class="compose-footer">
            <div class="d-flex align-center gap-sm">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i> Send
              </button>
              <button
                type="button"
                class="btn btn-secondary"
                onclick="history.back()"
              >
                <i class="fas fa-times"></i> Discard
              </button>
            </div>

            <div class="d-flex align-center gap-sm">
              <label class="btn btn-ghost btn-sm" style="cursor: pointer">
                <i class="fas fa-paperclip"></i> Attach
                <input
                  type="file"
                  name="attachments"
                  multiple
                  style="display: none"
                />
              </label>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
